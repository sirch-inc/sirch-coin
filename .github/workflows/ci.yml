# Legacy CI workflow - now replaced by ci-pipeline.yml
# 
# This workflow is kept for reference but disabled.
# The new ci-pipeline.yml provides a unified workflow with proper job dependencies
# that shows the security -> test -> build/deploy flow in the GitHub Actions UI.

name: CI (Legacy - Disabled)

on:
  workflow_dispatch:

  # Run on pushes to main (for direct commits/emergency fixes)
  push:
    branches: [main]
    paths-ignore:
      - 'docs/**'
      - '**/*.md'
  
  # Run on all PRs to main (your primary workflow)
  pull_request:
    branches: [main]
    paths-ignore:
      - 'docs/**'
      - '**/*.md'

env:
  SOURCE_BRANCH: ${{ github.head_ref || github.ref_name }}

permissions:
  contents: read

jobs:
  # Placeholder job that explains the migration
  migration-notice:
    runs-on: ubuntu-latest
    timeout-minutes: 1
    
    steps:
      - name: Migration Notice
        run: |
          echo "# ðŸ”„ CI Workflow Migration" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This CI workflow has been replaced by **ci-pipeline.yml** which provides:" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Proper job dependencies**: Security â†’ Tests â†’ Build/Deploy" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Clear visual flow**: See the dependency chain in GitHub Actions UI" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Parallel execution**: Security and tests run simultaneously" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Unified reporting**: Single workflow with comprehensive summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸš€ **The new ci-pipeline.yml workflow is now active for all pushes and PRs.**" >> $GITHUB_STEP_SUMMARY